define([],function(){var e=function(){this._listeners={}};return e.prototype.on=function(e,t){"string"==typeof e&&(e=[e]);var n,r=this;for(n=0;e.length>n;n++){this._listeners[e[n]]===void 0&&(this._listeners[e[n]]=[]);for(var i=0;this._listeners[e[n]].length>i;i++)if(this._listeners[e[n]][i]===t)return t;this._listeners[e[n]].push(t)}return this._onListenerAdded(e,t),{type:e,listener:t,removeListener:function(){r.removeListener(e,t)}}},e.prototype.addListener=function(e,t){return this.on(e,t)},e.prototype._onListenerAdded=function(){},e.prototype.removeListener=function(e,t){var n;if(e===void 0)return this._listeners={},!0;if("object"==typeof e&&"number"==typeof e.length){var r=!0;for(n=0;e.length>n;n++)this.removeListener(e[n],t)||(r=!1);return r}if(t===void 0)return this._listeners[e]=[],!0;if(this._listeners[e]===void 0)return!1;for(n=0;this._listeners[e].length>n;n++)if(this._listeners[e][n]===t)return this._listeners[e].splice(n,1),!0;return!1},e.prototype.emit=function(e){var t,n,r=!0,i=!1;if("string"==typeof e){if(e={type:e,_arguments:[]},arguments.length>0)for(n=1;arguments.length>n;n++)e._arguments.push(arguments[n]);i=!0}if(e.target===void 0&&(e.target=this),e.type===void 0)throw'Event "type" attribute is missing';if("object"==typeof this._listeners[e.type])for(n=0;this._listeners[e.type].length>n;n++)t=i?this._listeners[e.type][n].apply(this,e._arguments):this._listeners[e.type][n].call(this,e),t===!1&&(r=!1);return r},e.prototype.listenerCount=function(e){return this._listeners[e]===void 0?0:this._listeners[e].length},e.prototype.removeAllListeners=function(e){e===void 0?this._listeners={}:this._listeners[e]=[]},e.prototype.listeners=function(e){return"string"==typeof e?this._listeners[e]!==void 0?this._listeners[e]:[]:this._listeners},e});