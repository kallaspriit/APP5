define(["router/RouterBase","config/main","Navi","App","Util"],function(e,t,n,r,i){var o=function(){e.call(this)};return o.prototype=Object.create(e.prototype),o.prototype.init=function(){var e=this;return n.on(n.Event.URL_CHANGED,function(t){e._onUrlChanged(t.parameters)}),this},o.prototype.navigate=function(e,t,n){var o,a="/"+e+"/"+t;if(i.isObject(n)&&!i.isEmpty(n))for(o in n)a+=n[o]===!0?"/"+o:"/"+o+"="+n[o];r.location.path(a),r.validate()},o.prototype._onUrlChanged=function(e){var r,o,a,s,l=e.path,u=l.split("/"),c=t.index.module,p=t.index.action,f=t.index.parameters;if(u.length>=2&&u[1].length>0&&(c=u[1],f={}),u.length>=3&&u[2].length>0&&(p=u[2]),u.length>=4)for(r=3;u.length>r;r++)-1!==u[r].indexOf("=")?(o=u[r].split("="),a=o[0],s=i.normalizeType(o[1])):(a=u[r],s=!0),f[a]=s;n._open(c,p,f)},new o});