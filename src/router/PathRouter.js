define(["router/RouterBase","config/main","Navi","App","Util"],function(e,t,n,r,i){var o=function(){};return o.prototype=new e,o.prototype.init=function(){var e=this;return n.bind(n.Event.URL_CHANGED,function(t){e._onUrlChanged(t.parameters)}),this},o.prototype.navigate=function(e,t,n){var o,a="/"+e+"/"+t;if(i.isObject(n)&&!i.isEmpty(n))for(o in n)a+=n[o]===!0?"/"+o:"/"+o+"="+n[o];r.location.path(a),r.validate()},o.prototype._onUrlChanged=function(e){var r,o,a,s,u=e.path,l=u.split("/"),c=t.index.module,f=t.index.action,h=t.index.parameters;if(l.length>=2&&l[1].length>0&&(c=l[1],h={}),l.length>=3&&l[2].length>0&&(f=l[2]),l.length>=4)for(r=3;l.length>r;r++)-1!==l[r].indexOf("=")?(o=l[r].split("="),a=o[0],s=i.normalizeType(o[1])):(a=l[r],s=!0),h[a]=s;n._open(c,f,h)},new o});